name: Update Dynamic Badges
on:
  schedule:
    - cron: '0 */6 * * *' # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
  workflow_dispatch: 
jobs:
  update-badges:
    runs-on: ubuntu-latest
    steps:
      - name: Get repository count
        id: repo-count
        run: |
          COUNT=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
          "https://api.github.com/users/ellatuk" | jq -r '.public_repos') # <- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–Ω!
          echo "count=$COUNT" >> $GITHUB_OUTPUT

      - name: Create Repo Count Badge
        uses: schneegans/dynamic-badges-action@v1.7.0
        with:
          auth: ${{ secrets.GIST_TOKEN }}
          gistID: e5b52775a14ad67bd218a6e3c9fb095e 
          filename: repo-badge.json
          label: "üìÇ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏"
          message: ${{ steps.repo-count.outputs.count }}
          color: "3b82f6"
          style: "flat-square"
